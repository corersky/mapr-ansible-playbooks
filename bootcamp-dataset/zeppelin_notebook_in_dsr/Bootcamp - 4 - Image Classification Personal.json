{"paragraphs":[{"title":"Lesson 8","text":"In this lesson you will be querying the MapR-DB replicated table using Apache Drill in this Apache Zeppelin notebook.\n\nThe notebook consists out of a number of queries that reflect business questions about the classified image. The initial query constructs a Apache Drill view that is referenced in later parts of this notebook so therefore, it is important to perform that query first before continuing with the other queries.","dateUpdated":"2018-01-18T13:40:14+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":false,"title":true,"results":{},"enabled":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814391_847227452","id":"20180111-080459_1654389256","dateCreated":"2018-01-18T13:40:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:12138"},{"title":"Create a View for querying the classified data","text":"%drill\nCreate or Replace View \n    dfs.root.`/image-classification/output/image-output-json_view` as select \n        t.filename Filename\n        , t.objects.label Label\n        , t.objects.confidence Confidence\n        , t.objects.topleft.x TopLeftX\n        , t.objects.topleft.y TopLeftY\n        , t.objects.bottomright.x BottomRightX\n        , t.objects.bottomright.y BottomRightY \n    from (select filename, flatten(objects) as objects from dfs.root.`/image-classification/output/json/*.json`) t\n","user":"mapr","dateUpdated":"2018-01-18T13:51:16+0000","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814391_847227452","id":"20180111-085519_134746019","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:51:16+0000","dateFinished":"2018-01-18T13:51:16+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12139"},{"title":"Count the total number of objects in the dataset.","text":"%drill\nselect count(Distinct Filename) as `Files`, count(*) as Objects from dfs.root.`/image-classification/output/image-output-json_view`","user":"mapr","dateUpdated":"2018-01-18T13:51:26+0000","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814392_845303708","id":"20180111-081054_1882856626","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:51:26+0000","dateFinished":"2018-01-18T13:51:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12140"},{"text":"%drill\nselect *  from dfs.root.`/image-classification/output/image-output-json_view` limit 10","user":"mapr","dateUpdated":"2018-01-18T13:51:31+0000","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814392_845303708","id":"20180111-123744_907442680","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:51:31+0000","dateFinished":"2018-01-18T13:51:31+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12141"},{"title":"Which are the Top 5 objects that have been classified?","text":"%drill\nselect Label, count(*) Number from dfs.root.`/image-classification/output/image-output-json_view` group by Label order by 2 desc LIMIT 5\n","user":"mapr","dateUpdated":"2018-01-18T13:52:22+0000","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814392_845303708","id":"20180111-081210_1820375252","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:52:22+0000","dateFinished":"2018-01-18T13:52:22+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12142"},{"title":"What are the Top 3 images with the most objects classified","text":"%drill\nselect  Filename, count(*) Number from dfs.root.`/image-classification/output/image-output-json_view` group by Filename order by 2 desc LIMIT 3","user":"mapr","dateUpdated":"2018-01-18T13:52:47+0000","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814393_844918959","id":"20180111-093758_1983859732","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:52:47+0000","dateFinished":"2018-01-18T13:52:48+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12143"},{"title":"What are the Labels for the Top 5 images with the most objects classified?","text":"%drill\nselect Filename, Label, count(Label) as `Number`  from  dfs.root.`/image-classification/output/image-output-json_view` \nwhere Filename in \n(select Filename from  \n(select Filename, count(*) from dfs.root.`/image-classification/output/image-output-json_view` \nGroup by Filename Order By 2 Desc limit 5) vb\n) group by Filename, Label Order By Filename, Label,`Number` Asc","user":"mapr","dateUpdated":"2018-01-18T13:53:41+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814393_844918959","id":"20180111-124407_882109871","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:53:41+0000","dateFinished":"2018-01-18T13:53:41+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12144"},{"title":"What are the Labels for the Top 5 images with the most objects classified?","text":"%drill\nselect Label, sum(`Number`) as `Number` from\n(select Filename, Label, count(Label) as `Number` from  dfs.root.`/remote-image-classification/remote-image-output-table_view` \nwhere Filename in \n(select Filename from  \n(select Filename, count(*) from dfs.root.`/remote-image-classification/remote-image-output-table_view` \nGroup by Filename Order By 2 Desc limit 5) vb\n) group by Filename, Label )\nGroup by Label Order By `Number` Desc","user":"mapr","dateUpdated":"2018-01-18T13:59:18+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814394_846073206","id":"20180111-201010_171634294","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T13:59:18+0000","dateFinished":"2018-01-18T13:59:18+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12145"},{"title":"What are the Labels for the Top 3 images with the most objects classified per image?","text":"%drill\nselect Filename, Label, count(Label) as `Number` from  dfs.root.`/image-classification/output/image-output-json_view` \nwhere Filename in \n(select Filename from  \n(select Filename, count(*) as Totalcount from dfs.root.`/image-classification/output/image-output-json_view` \nGroup by Filename Order By Totalcount Desc limit 3) vb\n) group by Filename, Label","user":"mapr","dateUpdated":"2018-01-18T14:04:02+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"multiBarChart":{"stacked":true}},"commonSetting":{},"keys":[{"name":"Filename","index":0,"aggr":"sum"}],"groups":[{"name":"Label","index":1,"aggr":"sum"}],"values":[{"name":"Number","index":2,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814394_846073206","id":"20180112-073301_1977755800","dateCreated":"2018-01-18T13:40:14+0000","dateStarted":"2018-01-18T14:03:31+0000","dateFinished":"2018-01-18T14:03:31+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12146"},{"title":"What are the Top 10 objects identified with a confidence over 50%?","text":"%drill\n","dateUpdated":"2018-01-18T13:58:26+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1516282814395_845688457","id":"20180112-104902_1789045613","dateCreated":"2018-01-18T13:40:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:12147"}],"name":"ImageClassificationPersonal","id":"2D4SZF59T","angularObjects":{"2CWXN6156:shared_process":[],"2CZWGKVGC:shared_process":[],"2CZF1R6YF:shared_process":[],"2CYU3RYTQ:shared_process":[],"2CWYA8QH7:shared_process":[],"2CZVX7F7C:shared_process":[],"2CXVCPB7H:shared_process":[],"2CXT2M2HN:shared_process":[],"2CWUS6MTD:shared_process":[],"2CZQ6X16B:shared_process":[],"2D14PXUN7:shared_process":[],"2CZCT9G1W:shared_process":[],"2CX9QKGPF:shared_process":[],"2CYNJWSQ7:shared_process":[],"2CYSWPC59:shared_process":[],"2CZFS9WUF:shared_process":[],"2CY7FTAYC:shared_process":[],"2CYTFKYER:shared_process":[],"2CY5H7VTU:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}